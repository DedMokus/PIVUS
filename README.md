# üì¶ PIVUS: –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –∞–Ω–æ–Ω–∏–º–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ —Å –∞–Ω–∞–ª–∏–∑–æ–º —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
PIVUS ‚Äî —ç—Ç–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∞–Ω–æ–Ω–∏–º–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Ç–µ–∫—Å—Ç–∞. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã —Å –º–æ–¥–µ—Ä–∞—Ü–∏–µ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–≤–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.

## 1. –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
–°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä—ë—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤:

posts_service ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–Ω–æ–Ω–∏–º–Ω—ã–º–∏ –ø–æ—Å—Ç–∞–º–∏ (—Å–æ–∑–¥–∞–Ω–∏–µ, –ø–æ–ª—É—á–µ–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –∫–ª—é—á—É).

comments_service ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∫ –ø–æ—Å—Ç–∞–º —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∞–Ω–∞–ª–∏–∑–æ–º –∏—Ö —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.

sentiment_service ‚Äî –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–≤–æ–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Ç–µ–∫—Å—Ç–∞ (positive/negative) –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—Å–µ–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ —Å–æ–≤–º–µ—Å—Ç–Ω–æ.

## 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
üß± –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:

* FastAPI ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è API.
* PostgreSQL ‚Äî –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö.
* Docker / Docker Compose ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è.
* Transformers + ONNXRuntime ‚Äî –∏–Ω—Ñ–µ—Ä–µ–Ω—Å –º–æ–¥–µ–ª–∏ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.
* pytest ‚Äî —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã.


## 3. –°–ø–æ—Å–æ–±—ã –∑–∞–ø—É—Å–∫–∞
‚ö° –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker
```bash
docker-compose up --build
```
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:

posts_service: http://localhost:8001
comments_service: http://localhost:8002
sentiment_service: http://localhost:8003

### üêç –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑ Docker
–°–æ–∑–¥–∞–π—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:

```bash
bash setup.sh
```
–ó–∞—Ç–µ–º –ø–æ –æ—á–µ—Ä–µ–¥–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –∏–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:

```bash
cd posts_service
uvicorn main:app --reload --port 8001
```
(–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤: comments_service, sentiment_service)

### üåç –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–ü–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ docker-compose:

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è         | –û–ø–∏—Å–∞–Ω–∏–µ                         | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é                                  |
|--------------------|----------------------------------|--------------------------------------------------------|
| POSTGRES_USER      | –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ë–î              | postgres_user                                          |
| POSTGRES_PASSWORD  | –ø–∞—Ä–æ–ª—å                           | postgres_password_123                                  |
| POSTGRES_DB        | –∏–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö                  | telegraph_db                                           |
| POSTGRES_HOST      | —Ö–æ—Å—Ç –ë–î                          | db                                                     |
| POSTGRES_PORT      | –ø–æ—Ä—Ç –ë–î                          | 5432                                                   |
| MODEL_NAME         | –∏–º—è –º–æ–¥–µ–ª–∏ Hugging Face          | cointegrated/rubert-tiny-sentiment-balanced            |
| ONNX_MODEL_PATH    | –ø—É—Ç—å –¥–æ ONNX –º–æ–¥–µ–ª–∏              | /app/model.onnx                                        |
| SENTIMENT_HOST     | –∞–¥—Ä–µ—Å sentiment_service          | sentiment_service                                      |
| SENTIMENT_PORT     | –ø–æ—Ä—Ç sentiment_service           | 8003                                                   |

## 4. üìñ API-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
–í—Å–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:

http://localhost:800*/docs

### ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
#### posts_service
POST /posts ‚Äî —Å–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç

GET /posts/{id} ‚Äî –ø–æ–ª—É—á–∏—Ç—å –ø–æ—Å—Ç

PUT /posts/{id}?edit_key=... ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ—Å—Ç –ø–æ –∫–ª—é—á—É

#### comments_service
POST /comments ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)

GET /comments/{post_id} ‚Äî —Å–ø–∏—Å–æ–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∫ –ø–æ—Å—Ç—É

#### sentiment_service
POST /sentiment-check ‚Äî –∞–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞ (text) –Ω–∞ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (positive / negative)

## 5. üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–°–µ—Ä–≤–∏—Å—ã –≤–∫–ª—é—á–∞—é—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å in-memory –±–∞–∑–∞–º–∏ –∏ –º–æ–∫–∞–º–∏.
```bash
pytest --maxfail=1 --disable-warnings -v
```

## 6. üë®‚Äçüíª –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞
–ê–≤—Ç–æ—Ä—ã: t.me/ramil2911, t.me/dedmokus
–ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–µ –±—É–¥–µ—Ç
